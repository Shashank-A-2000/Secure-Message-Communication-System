<!DOCTYPE html>
<html>
<head>
<title>Key Decryption</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="">
<link href="/css/bootstrap.min.css" rel="stylesheet">
<link href="/css/adminstyle.css" rel="stylesheet">
<link href="/fonts/f1.css" rel="stylesheet">
<link href="/fonts/f2.css" rel="stylesheet">
<link href="/fonts/f3.css" rel="stylesheet">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">	
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<style>
    .sec-foot{
            position:absolute;
            bottom:0px;
            width:100%;
    }
</style>
</head>
<body>
<header class="item header margin-top-0">
<div class="wrapper">
	<nav role="navigation" class="navbar navbar-white navbar-embossed navbar-lg navbar-fixed-top">
	<div class="container">
		<div class="navbar-header">
			<button data-target="#navbar-collapse-02" data-toggle="collapse" class="navbar-toggle" type="button">
			<i class="fa fa-bars"></i>
			<span class="sr-only">Toggle navigation</span>
			</button>
			<a href="/user/keydecrypt" class="navbar-brand brand">Key Decryption </a>
		</div>
	
		<div id="navbar-collapse-02" class="collapse navbar-collapse">
			<ul class="nav navbar-nav navbar-right">
				<li class="propClone"><a href="/user/inbox/<%=userid%>">Inbox</a></li>
				<li class="propClone"><a href="/user/compose">Compose</a></li>
				<li class="propClone"><a href="/user/update">Profile</a></li>
				<li class="nav-item dropdown">
					<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
					  Key
					</a>
					<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
					  <a class="dropdown-item" href="/user/keyrequests">Key Requests</a><br>
					  <a class="dropdown-item" href="/user/keydecrypt">Key Decryption</a>
					</div>
				</li>
				  <li role="presentation"><a href="/user/logout"> <span class="glyphicon glyphicon-log-out"></span> Log out</a></li>

			</ul>
		</div>
	</div>
	</nav>
</header>
<br><br><br><br>

<div class="container">
		<br>
		<div class="panel panel-default">
			<div class="panel-body">
				
						<form method="post" enctype="multipart/form-data" id="decform">
							<span>Upload Image</span>
							<input type="file" name="mypic" required /> <br>
							<textarea id="key" name="key" disabled></textarea><br>
							<button class="btn btn-sm btn-success" type="submit" value="submit" id="decbut">Submit</button>
						</form>
					</tbody>
			</div>		
		</div>
</div>
<footer>
<div class="footer-1 sec-foot text-center">
    <div class="container">
			<p>
				 <h3>&copy; 2021 Secure Message Communication System<br/></h3>
			</p>
	</div>
</div>
</footer>
<script src="/js/jquery-.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/anim.js"></script>	
<script src="/js/inbox.js"></script>
</script>
</body>
<script>
	$("#decbut").click((event)=>{
	event.preventDefault();
	var form=$('#decform')[0];
	var data = new FormData(form);
	$.ajax({
		type:"POST",
		enctype:'multipart/form-data',
		url:"/key/decrypt",
		data:data,
		processData:false,
		contentType:false,
		cache:false,
		success:function(data){
			if(data === "Fail")
				alert("Invalid Image");
			else{
				document.getElementById("key").value = data;
			}
		},
		error:function(e){
			console.log(e);
		}
	});
});
</script>
</html>

